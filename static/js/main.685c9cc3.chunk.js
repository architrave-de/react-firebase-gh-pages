(window["webpackJsonpreact-firebase-app"]=window["webpackJsonpreact-firebase-app"]||[]).push([[0],{121:function(e,t,a){e.exports=a.p+"static/media/one.f15b96a1.svg"},122:function(e,t,a){e.exports=a.p+"static/media/second.7f4cae36.svg"},123:function(e,t,a){e.exports=a.p+"static/media/third.a034b65e.svg"},134:function(e,t,a){e.exports=a(238)},148:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},236:function(e,t,a){},238:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(25),c=a.n(l),o=a(12),i=a(13),s=a(15),u=a(14),m=a(16),d=a(62),p=a(102),h=a(37),f=a(9),y=a.n(f),b=(a(139),function(e){e.redirectUrl;return{signInOptions:[y.a.auth.GoogleAuthProvider.PROVIDER_ID,y.a.auth.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccess:function(e,t,a){return!1}}}});y.a.initializeApp({apiKey:"AIzaSyAr-tnxDvQTzaewLLGgNnXBQbxpOHyaUbw",authDomain:"ping-board-c2743.firebaseapp.com",databaseURL:"https://ping-board-c2743.firebaseio.com",projectId:"ping-board-c2743",storageBucket:"",messagingSenderId:"88261141437",appId:"1:88261141437:web:2f8e0157e8751fa84568d4"});var g=y.a.firestore(),E=864e5,v=new Date;function O(e){var t=e.startDate,a=void 0===t?v:t,n=a-new Date(v.getFullYear(),0,0)+60*(v.getTimezoneOffset()-v.getTimezoneOffset())*1e3,r=Math.floor(n/E),l=a.getFullYear(),c=("0"+(a.getMonth()+1)).slice(-2),o=l.toString().slice(-2),i=parseInt(o.concat(r.toString()));return{year:l,month:c,dayNumber:r,yearDayNumber:i}}function j(e){var t=e.day,a=t.year.toString().slice(-2),n=t.dayNumber.toString();return parseInt(a.concat(n))}var k=a(116);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D=new(function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,[{key:"getToken",value:function(){return g.collection(this.dbCollection().appManifest).get().then((function(e){var t=[];return e.forEach((function(e){t.push(e.data())})),t[0].slackToken})).catch((function(e){console.log("Error getting slackToken: ",e)}))}},{key:"getCollectionData",value:function(e,t,a){return(t?g.collection(e).orderBy(t,a):g.collection(e)).get().then((function(e){var t=[];return e.forEach((function(e){t.push(e.data())})),t}))}},{key:"dbCollection",value:function(){return{appManifest:"manifest",sections:"sections",players:"players",days:"days"}}},{key:"playerByEmail",value:function(e){var t=e.email;return g.collection(this.dbCollection().players).where("email","==",t).get().then((function(e){console.log(e);var t=[];return e.forEach((function(e){t.push(P({id:e.id},e.data()))})),t[0]})).catch((function(e){console.log("Error getting player by email: ",e,t)}))}},{key:"lastPlayerId",value:function(){return this.players.get().then((function(e){var t=null;return e.forEach((function(e){t=e.id})),t}))}},{key:"addPlayer",value:function(e){var t=e.name,a=e.slackName,n=e.image,r=e.monthlyRecords,l=void 0===r?{}:r,c=e.email,o=e.totalPoints,i=void 0===o?0:o;return g.collection(this.dbCollection().players).doc().set({name:t,slackName:a,image:n,monthlyRecords:l,email:c,totalPoints:i}).then((function(e){console.log("the player has beed added")})).catch((function(e){return console.log(e)}))}},{key:"updatePlayer",value:function(e){console.log("TCL: API -> updatePlayer -> player",e),g.collection(this.dbCollection().players).doc(e.id).set(P({},e)).then((function(e){console.log("the player has beed updated---\x3e ",e)})).catch((function(e){return console.log(e)}))}},{key:"createNewDayEntry",value:function(e){var t=e.dayNumber;return g.collection("days").add({insertDate:new Date,dayNumber:t,rounds:[]}).then((function(e){return e}))}},{key:"addRound",value:function(e){var t=this,a=e.dayNumber,n=e.round,r=function(e){return g.collection("days").doc(e.id).update({rounds:k.firestore.FieldValue.arrayUnion(P({},n))})};return g.collection("days").where("dayNumber","==",a).get().then((function(e){return e.docs[0]?r(e.docs[0]):t.createNewDayEntry({dayNumber:a}).then((function(e){return r(e)}))}))}},{key:"getDayMatches",value:function(e){var t=e.dayNumber;return g.collection("days").where("dayNumber","==",t).get().then((function(e){var t=[];return e.forEach((function(e){t.push(e.data())})),t})).then((function(e){return e})).catch((function(e){console.log("Error getting the results: ",e)}))}},{key:"currentDayNumber",get:function(){return parseInt(j({day:O({})}))}},{key:"players",get:function(){return g.collection(this.dbCollection().players)}},{key:"playersList",get:function(){return g.collection(this.dbCollection().players).orderBy("totalPoints","desc").get().then((function(e){var t=[];return e.forEach((function(e){t.push(P({id:e.id},e.data()))})),t})).catch((function(e){console.log("Error getting the results: ",e)}))}},{key:"todayScores",get:function(){return this.getCollectionData(this.dbCollection().points)}}]),e}()),S=D;console.log(D.getToken());a(148);var x=a(70),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={appSections:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=S.dbCollection();S.getCollectionData(t.sections).then((function(t){var a=[];return t.forEach((function(e){return a.push(e)})),e.setState({appSections:a}),a}))}},{key:"render",value:function(){var e=this.state.appSections;return r.a.createElement("div",{className:"app-navbar"},r.a.createElement(d.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(d.a.Brand,{href:"/"},this.props.appName),r.a.createElement(d.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(d.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(p.a,{className:"mr-auto"},e.map((function(e){return r.a.createElement(p.a.Link,{href:e.url,key:e.name},r.a.createElement(x.b,{style:{textDecoration:"none",color:"inherit"},to:e.url}," ",e.name))}))))))}}]),t}(r.a.Component),C=a(120),I=(a(159),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"section-wrapper"},r.a.createElement(C.a,{className:"section section--".concat(this.props.background)},r.a.createElement("div",null,r.a.createElement("h2",{className:"section__title"},this.props.title)),this.props.children)))}}]),t}(r.a.Component)),M=a(133),L=a(39),A=a(28),T=a(23),F=a(124),U=a(21),R=a(121),_=a.n(R),B=a(122),z=a.n(B),G=a(123),H=a.n(G),J=(a(160),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).card=function(e,t,a){var n=e.rounds;return r.a.createElement(U.a,{className:"card-".concat(e.position),key:t},r.a.createElement("div",{className:"cards-group__image-wrapper"},r.a.createElement(U.a.Img,{variant:"top",src:a[t]})),r.a.createElement(U.a.Body,null,n.length>=1?n.map((function(t,a){return r.a.createElement("div",{key:a},r.a.createElement(U.a.Title,null,r.a.createElement("h5",null,t.description)),r.a.createElement("ul",null,r.a.createElement("li",null,t.players&&t.players[e.position].name)))})):r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a.Title,null,"there is no data"))),r.a.createElement(U.a.Footer,null))},a.state={dayMatches:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=j({day:O({})}),t=this;g.collection("days").where("dayNumber","==",e).get().then((function(e){e.forEach((function(e){t.setState({dayMatches:[].concat(Object(M.a)(t.state.dayMatches),[e.data()])})}))})).catch((function(e){console.log("Error getting the results: ",e)}))}},{key:"render",value:function(){var e=this,t=this.props.cards;this.state.dayMatches[0]&&t.map((function(t){t.rounds=e.state.dayMatches[0].rounds||[]}));var a=[z.a,_.a,H.a];return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{className:"cards-group"},r.a.createElement(A.a,null,"}",r.a.createElement(T.a,{md:{span:10,offset:1}},r.a.createElement(F.a,null,!!t&&t.forEach((function(e){e.rounds.length})),t.map((function(t,n){return e.card(t,n,a)})))))))}}]),t}(r.a.Component));J.defaultProps={cards:[{position:2,rounds:[]},{position:1,rounds:[]},{position:3,rounds:[]}]};var Y=a(71),K=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={players:[],month:null},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=O({}),t=e.year.toString().slice(-2).concat(e.month.toString());this.setState({month:t});var a=this;g.collection("players").orderBy("monthlyRecords.".concat(t),"desc").get().then((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),a.setState({players:t})})).catch((function(e){console.log("Error getting the results: ",e)}))}},{key:"render",value:function(){var e=this.state,t=e.players,a=e.month;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,null,r.a.createElement(A.a,null,r.a.createElement(T.a,{md:{span:10,offset:1}},r.a.createElement(Y.a,{striped:!0,bordered:!0,hover:!0,variant:"dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"First Name"),r.a.createElement("th",null,"Slack name"),r.a.createElement("th",null,"Points"))),r.a.createElement("tbody",null,t&&t.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.slackName),r.a.createElement("td",null,e.monthlyRecords[a]))}))))))))}}]),t}(r.a.Component),V=a(48),W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={players:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;S.players.orderBy("totalPoints","desc").get().then((function(t){var a=[];t.forEach((function(e){a.push(e.data())})),e.setState({players:a})})).catch((function(e){console.log("Error getting the results: ",e)}))}},{key:"render",value:function(){var e=this.state.players;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,null,r.a.createElement(A.a,null,r.a.createElement(T.a,{md:{span:10,offset:1}},r.a.createElement("h4",null,"Total players ",e.length),r.a.createElement(Y.a,{striped:!0,bordered:!0,hover:!0,variant:"dark"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Total points"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"email"),r.a.createElement("th",null,"Slack name"))),r.a.createElement("tbody",null,e.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.totalPoints),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.slackName))}))))))))}}]),t}(r.a.Component),Q=a(47),X=a(22),$=a(32),q=a(84),Z=a(128),ee=a(35),te=a(129),ae=a(36),ne=a(72),re=a.n(ne),le=a(125),ce=a(24),oe=a.n(ce),ie=a(52),se=a(126),ue=a.n(se);function me(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function de(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?me(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):me(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var pe="test-bot-firebase",he=function(){var e=Object(ie.a)(oe.a.mark((function e(t,a){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.getToken().then((function(e){return new ue.a({token:e,scopes:"bot"})})).then((function(e){return t(de({},a),e)})).catch((function(e){return console.error(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),fe=function(e,t){var a=e.channelName,n=void 0===a?pe:a,r=e.text,l=e.blocks,c=void 0===l?[]:l;return t.chat.postMessage({channel:n,text:r,blocks:c})},ye=function(){var e=Object(ie.a)(oe.a.mark((function e(t,a){var n,r;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.channelName,r=void 0===n?pe:n,e.abrupt("return",a.channels.list({channel:r}).then((function(e){return(e.channels.filter((function(e){return e.name===r}))[0]||null).id})).catch((function(e){return console.error(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),be=function(e,t){var a=e.channelId;return t.conversations.members({channel:a})},ge=function(e,t){return Object(le.a)(e),t.channels.list().then((function(e){return e.channels}))},Ee=function(e,t){var a=e.user;return t.users.info({user:a})},ve=function(){var e=Object(ie.a)(oe.a.mark((function e(t,a){var n,r,l,c;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.channelName,e.next=3,ye({channelName:n},a);case 3:return r=e.sent,e.next=6,be({channelId:r},a);case 6:return l=e.sent,c=[],l.members.forEach(function(){var e=Object(ie.a)(oe.a.mark((function e(t){var n,r,l,o,i;return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee({user:t},a);case 2:n=e.sent,r=n.user.profile,l=r.real_name,o=r.email,i=r.image_192,c.push({slackName:n.user.name,name:l,email:o,image:i});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Oe=function(e){var t=e.round,a=t.players;return[{type:"divider"},{type:"section",text:{type:"mrkdwn",text:"*".concat(t.description,"*\n")}},{type:"section",text:{type:"mrkdwn",text:"* 1: ".concat(a[1].name,"* :first_place_medal:\n got the first place with 3 points")},accessory:{type:"image",image_url:"".concat(a[1].image),alt_text:"".concat(a[1].name)}},{type:"section",text:{type:"mrkdwn",text:"* 2: ".concat(a[2].name,"* :second_place_medal:\n got the second place with 2 points")},accessory:{type:"image",image_url:"".concat(a[2].image),alt_text:"".concat(a[2].name)}},{type:"section",text:{type:"mrkdwn",text:"* 3: ".concat(a[3].name,"* :third_place_medal:\n got the third place with 1 points")},accessory:{type:"image",image_url:"".concat(a[3].image),alt_text:"".concat(a[3].name)}}]};a(173);function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?je(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var we=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleInput=function(e){e.persist();var t=e.target,n=t.name,r=t.value,l=a.state.round;l[n]=r,a.setState({round:l})},a.handleDateChange=function(e){var t=a.state.round;t.date=e,t.players={},a.setState({round:t,dayInfos:O({startDate:e})})},a.handleAddRound=function(e){e.preventDefault();var t=a.state,n=t.round,r=t.dayInfos;if(Object.keys(n.players).length<3)return a.setState({error:"please choose 3 players!"}),!1;n.insertedBy={},S.addRound({dayNumber:r.yearDayNumber,round:n}).then((function(e){for(var t=n.players,r=0,l=Object.keys(t);r<l.length;r++){var c=l[r];a.updatePlayerPoints(t[c])}a.setState({error:null,playersList:[],round:{players:{},date:null,insertDate:new Date,description:""}})})).then((function(e){var t=Oe({round:n});he(fe,{channelName:"test-bot-firebase",text:n.description,blocks:JSON.stringify(t)})})).catch((function(e){return console.log("there is an error",e)}))},a.handleSelectPlayer=function(e){var t=a.state.round,n=[0,3,2,1],r=e.target,l=r.name,c=r.id,o=l,i=a.state.playersList.filter((function(e){return e.id===c}))[0],s=i.monthlyRecords[a.selectedMonthId(t.date)]||0;i.monthlyRecords[a.selectedMonthId(t.date)]=s+n[o],i.totalPoints=i.totalPoints+n[o],t.players[o]=i,a.setState({round:ke({},t),error:null})},a.state={error:null,playersList:[],round:{players:{},date:null,insertDate:new Date,description:""}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;S.playersList.then((function(t){e.setState({playersList:t})}))}},{key:"updatePlayerPoints",value:function(e){S.updatePlayer(e)}},{key:"selectedMonthId",value:function(e){var t=O({startDate:e}),a=t.year,n=t.month;return a.toString().slice(-2).concat(n.toString())}},{key:"render",value:function(){var e=this,t=(this.state.round||{}).players;return r.a.createElement(U.a,{style:{backgroundColor:"white",margin:"14px 0",padding:"7px"}},r.a.createElement(ae.a,{variant:"secondary"},r.a.createElement(ae.a.Heading,null,this.props.title),r.a.createElement("hr",null),r.a.createElement(X.a.Group,{controlId:"roundDescription"},r.a.createElement(X.a.Label,null,"Give it a name"),r.a.createElement(X.a.Control,{type:"text",as:"input",name:"description",onChange:this.handleInput,value:this.state.round.description,placeholder:"like lunch round.."})),r.a.createElement(X.a,{onSubmit:this.handleAddRound},r.a.createElement(X.a.Group,{controlId:"roundDate"},r.a.createElement(X.a.Label,null,"Select round's date"),r.a.createElement("br",null),r.a.createElement(X.a.Text,{className:"text-muted"},"it's mandatory!"),r.a.createElement(re.a,{selected:this.state.round.date,onChange:this.handleDateChange,maxDate:new Date})),r.a.createElement("hr",null),!!this.state.round.date&&r.a.createElement(X.a.Row,null,r.a.createElement(Z.a,null,r.a.createElement(A.a,null,[{style:"Success",id:1,title:"First Player"},{style:"Primary",id:2,title:"Second Player"},{style:"Secondary",id:3,title:"third Player"}].map((function(a,n){return r.a.createElement(T.a,null,r.a.createElement("h6",null,t[a.id]?t[a.id].name:"-"),r.a.createElement(te.a,{title:a.title,variant:a.style.toLowerCase(),id:"dropdown-variants-".concat(a.style),key:a.id},!!e.state.playersList&&e.state.playersList.map((function(t,n){return r.a.createElement(ee.a.Item,{key:n,name:a.id,id:t.id,onClick:e.handleSelectPlayer},t.name)}))))}))))),r.a.createElement("br",null),!!this.state.error&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{key:4,variant:"warning"},this.state.error),r.a.createElement("br",null)),r.a.createElement($.a,{variant:"outline-info",type:"submit"},"Add Round"),r.a.createElement(X.a.Row,null))))}}]),t}(r.a.Component),Pe=a(101),De=(a(235),a(79));function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var xe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleImportUsers=function(){var e=Object(Q.a)(a);a.state.channelUsers.forEach((function(t,a){t.email=t.email||"no@email.here",e.handleAddPlayer(t)})),a.setState({processing:!0,alert:!0})},a.handleSelectChannel=function(e){var t=e.target.name;e.preventDefault();var n=Object(Q.a)(a);n.setState({processing:!0,selectedChannel:t}),he(ve,{channelName:t}).then((function(e){n.setState({channelUsers:e,processing:!1})}))},a.handleAddPlayer=function(e){S.addPlayer(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Se(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e))},a.state={channels:[],processing:!1,channelUsers:[],channelUsersNumber:null,selectedChannel:"Select channel",alert:!1},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("slack features"),he(ge).then((function(t){e.setState({channels:t})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"slack-function"},r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{variant:"secondary"},r.a.createElement(ae.a.Heading,null,this.props.title),r.a.createElement("hr",null),r.a.createElement(ee.a,null,r.a.createElement(ee.a.Toggle,{variant:"success",id:"dropdown-basic"},this.state.selectedChannel),r.a.createElement(ee.a.Menu,null,this.state.channels.map((function(t,a){return r.a.createElement(ee.a.Item,{key:a,name:t.name,onClick:e.handleSelectChannel},t.name)})))),r.a.createElement("br",null),r.a.createElement(ae.a,{variant:"success",show:this.state.alert}),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement($.a,{disabled:this.state.processing,onClick:this.handleImportUsers,variant:"outline-success"},this.state.processing?r.a.createElement(r.a.Fragment,null,r.a.createElement(De.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"})," ","processing ..."," "):"Import users")))))}}]),t}(n.Component),Ne=a(132);function Ce(e){var t=e.mainButtonAction,a=e.title,n=void 0===a?"Welcome!":a,l=e.user,c=void 0===l?{name:"user name"}:l;return r.a.createElement(ae.a,{variant:"secondary"},r.a.createElement(ae.a.Heading,null,n," ",c.name),r.a.createElement("hr",null),r.a.createElement(Ne.a,{src:c.image,rounded:!0,style:{width:"96px"}}),r.a.createElement("br",null),"you are logged in, you can sign out here.",r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement($.a,{onClick:function(){return t({})},variant:"outline-info"},"Log me out")))}function Ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Me=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).showLoginOptions=function(){var e=Object(Q.a)(a);y.a.auth().onAuthStateChanged((function(t){if(t){console.log("TCL: ControlPanel -> showLoginOptions -> user",t),S.playerByEmail({email:t.email}).then((function(t){e.setState({loading:!1,isUserLogged:!0,currentUser:t})}));var a=t.email;a.substring(a.lastIndexOf("@")+1)}else e.setState({loading:!1,isUserLogged:!1})})),(Pe.a.AuthUI.getInstance()||new Pe.a.AuthUI(y.a.auth())).start("#firebaseui-auth-container",b({}))},a.handleSignOut=function(e){var t=e.errMessage,n=Object(Q.a)(a);y.a.auth().signOut().then((function(e){n.setState({loading:!0,isUserLogged:!1,errMessage:t||null,currentUser:null}),n.showLoginOptions({uiExists:!0})}))},a.handleAddPlayer=function(e){e.preventDefault();var t={},n=new FormData(e.target);for(var r in a.state.playerFields)t[r]=n.get(r);S.addPlayer(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ie(a,!0).forEach((function(t){Object(h.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ie(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t)).then((function(e){}))},a.state={errMessage:null,loading:!0,isUserLoggedIn:!0,lastPlayerId:null,currentUser:"",playerFields:{name:{name:"name",label:"Name",type:"text",placeholder:"enter player name"},email:{name:"email",label:"Email",type:"email",placeholder:"enter player email"},password:{name:"password",label:"Password",type:"password",placeholder:"password"},slackName:{name:"slackName",label:"Slack name",type:"text",placeholder:"enter player slack name"},image:{name:"image",label:"Image",type:"text",placeholder:"enter image path"}}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.showLoginOptions({}),S.lastPlayerId().then((function(t){return e.setState({lastPlayerId:parseInt(t)+1})})).catch((function(e){console.log("the player id cant be generated")}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.playerFields,n=t.isUserLogged,l=t.loading,c=t.currentUser;return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,null,r.a.createElement(A.a,null,r.a.createElement(T.a,{md:{span:10,offset:1}},n?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,{mainButtonAction:e.handleSignOut,user:c}),r.a.createElement(we,{title:"Add new round",user:c}),r.a.createElement("br",null),r.a.createElement(xe,{title:"Import Slack channel's users"}),r.a.createElement("br",null),r.a.createElement(q.a,{defaultActiveKey:"0"},r.a.createElement(U.a,null,r.a.createElement(q.a.Toggle,{as:U.a.Header,eventKey:"1"},"Add player manually"),r.a.createElement(q.a.Collapse,{eventKey:"1"},r.a.createElement(U.a.Body,null,r.a.createElement(X.a,{onSubmit:e.handleAddPlayer},!!a&&Object.keys(a).map((function(e){return r.a.createElement(X.a.Group,{key:a[e].name},r.a.createElement(X.a.Label,null,a[e].label),r.a.createElement(X.a.Control,a[e]))})),r.a.createElement($.a,{variant:"primary",type:"submit"},"Add new player"))))))):r.a.createElement(U.a,{className:"text-left"},!!l&&r.a.createElement($.a,{variant:"primary",disabled:!0},r.a.createElement(De.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Loading..."),r.a.createElement(U.a.Header,null),r.a.createElement(U.a.Body,null,r.a.createElement(U.a.Title,null,"Please Login to continue .."),r.a.createElement(U.a.Text,null,r.a.createElement("div",{id:"firebaseui-auth-container"}))))))))}}]),t}(r.a.Component),Le=a(83),Ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={date:null,dateTitle:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleDateChange",value:function(e){var t,a=new Date(e),n=a.getMonth(),r=a.getFullYear();this.setState({dateTitle:"".concat((t=n,["January","February","March","April","May","June","July","August","September","October","November","December"][t])," ").concat(r)})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,null,r.a.createElement(A.a,null,r.a.createElement(T.a,{md:{span:6,offset:3}},r.a.createElement("h6",null,this.state.dateTitle),r.a.createElement(Le.a,{className:"mb-3"},r.a.createElement(Le.a.Prepend,null,r.a.createElement(Le.a.Text,{id:"basic-addon1"},"Date"),r.a.createElement(re.a,{selected:this.state.date,onChange:this.handleDateChange.bind(this),maxDate:new Date,dateFormat:"MM.yyyy",showMonthYearPicker:!0})))))))}}]),t}(r.a.Component),Te=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x.a,null,r.a.createElement(N,{appName:this.props.name}),r.a.createElement(V.a,{path:"/",exact:!0},r.a.createElement(I,{title:"Todays Records",background:"black"},r.a.createElement(J,null)),r.a.createElement(I,{title:"Monthly Records"},r.a.createElement(K,null))),r.a.createElement(V.a,{path:"/players",exact:!0},r.a.createElement(I,{title:"Players table"},r.a.createElement(W,null))),r.a.createElement(V.a,{path:"/year",exact:!0},r.a.createElement(I,{title:"Yearly table"},r.a.createElement("h2",null,"here is the Yearly table"))),r.a.createElement(V.a,{path:"/month",exact:!0},r.a.createElement(I,{title:"Month"},r.a.createElement(Ae,null))),r.a.createElement(V.a,{path:"/control-panel",exact:!0},r.a.createElement(I,{title:"Admin Control"},r.a.createElement(Me,null)))))}}]),t}(r.a.Component),Fe=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={appManifest:{appName:"..loading"}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(Te,{name:this.props.name})}}]),t}(r.a.Component);a(236),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(237);!function(){var e=S.dbCollection();S.getCollectionData(e.appManifest).then((function(e){var t=e[0].name||"app name";c.a.render(r.a.createElement(Fe,{name:t}),document.getElementById("root"))}))}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[134,1,2]]]);
//# sourceMappingURL=main.685c9cc3.chunk.js.map